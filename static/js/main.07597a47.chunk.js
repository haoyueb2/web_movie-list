(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(203)},126:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(35),i=a(36),o=a(40),c=a(37),u=a(41),m=(a(125),a(208)),s=a(204),y=a(62),h=a(211),v=a(11),f=a(212),g=a(209),d=a(210),b=(a(126),a(120)),p=a(38),E=a(207),x=s.a.Header,k=s.a.Content,N=s.a.Footer,S=[],w={},O=(h.b.SubMenu,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={data:{},directors:"",casts:"",writers:"",rating:{average:1,rating_people:""}},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("./../films.json").then(function(e){return e.text()}).then(function(t){var a=t.split("\n"),r=!0,n=!1,l=void 0;try{for(var i,o=a[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value,u=JSON.parse(c);S.push(u)}}catch(F){n=!0,l=F}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}for(var m=0,s=S;m<s.length;m++){var y=s[m];if(y._id===e.props.match.params.id){w=y,console.log(w);var h="",v=!0,f=!1,g=void 0;try{for(var d,b=w.directors[Symbol.iterator]();!(v=(d=b.next()).done);v=!0){h+=d.value.name}}catch(F){f=!0,g=F}finally{try{v||null==b.return||b.return()}finally{if(f)throw g}}var p="",E=!0,x=!1,k=void 0;try{for(var N,O=w.casts[Symbol.iterator]();!(E=(N=O.next()).done);E=!0){p=p+N.value.name+"/"}}catch(F){x=!0,k=F}finally{try{E||null==O.return||O.return()}finally{if(x)throw k}}var I="",j=!0,A=!1,C=void 0;try{for(var _,z=w.writers[Symbol.iterator]();!(j=(_=z.next()).done);j=!0){I=I+_.value.name+"/"}}catch(F){A=!0,C=F}finally{try{j||null==z.return||z.return()}finally{if(A)throw C}}var H={average:5,rating_people:""};H.average=parseFloat(w.rating.average),H.rating_people=w.rating.rating_people,e.setState({data:w,directors:h,casts:p,writers:I,rating:H})}}})}},{key:"render",value:function(){return n.a.createElement(s.a,{className:"layout"},n.a.createElement(x,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(h.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},n.a.createElement(h.b.Item,{key:"1"},n.a.createElement("a",{href:"/"}," ",n.a.createElement(v.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),n.a.createElement(h.b.Item,{key:"2"},n.a.createElement("a",{href:"/charts"}," ",n.a.createElement(v.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")))),n.a.createElement(k,{style:{padding:"0 50px"}},n.a.createElement(f.a,{style:{margin:"16px 0"}},n.a.createElement(f.a.Item,null,"details")),n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280,Align:"center"}},n.a.createElement("h1",null,this.state.data.title),n.a.createElement(E.a,{style:{width:300},cover:n.a.createElement("img",{alt:"example",src:this.state.data.poster})}),n.a.createElement("h2",null,"\u5bfc\u6f14\uff1a",this.state.directors),n.a.createElement("h2",null,"\u4e3b\u6f14\uff1a",this.state.casts),n.a.createElement("h3",null,"\u8bc4\u5206\uff1a",this.state.rating.average,"(\u8bc4\u5206\u4eba\u6570",this.state.rating.rating_people,"\u4eba)"),n.a.createElement(d.a,{disabled:!0,value:this.state.rating.average/2,allowHalf:!0}),n.a.createElement("h3",null,"\u4e0a\u6620\u65e5\u671f\uff1a",this.state.data.pubdata),n.a.createElement("h3",null,"\u65f6\u957f\uff1a",this.state.data.duration,"\u5206\u949f"),n.a.createElement("h4",null,"\u539f\u8457\uff1a",this.state.writers),n.a.createElement("h4",null,"\u8bed\u8a00\uff1a",this.state.data.languages),n.a.createElement("p",null,"\u5267\u60c5\u6897\u6982\uff1a",this.state.data.summary))),n.a.createElement(N,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab02 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(r.Component)),I=a(19),j=s.a.Header,A=s.a.Content,C=s.a.Footer,_=[],z=(h.b.SubMenu,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={data:[],genresNumber:[],countryNumber:[],languageNumber:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch("./films.json").then(function(e){return e.text()}).then(function(t){var a=t.split("\n"),r=!0,n=!1,l=void 0;try{for(var i,o=a[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value,u=JSON.parse(c);_.push(u)}}catch(m){n=!0,l=m}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}e.setState({data:_,genresNumber:e.genreAnalyze(_),countryNumber:e.countryAnalyze(_),languageNumber:e.languageAnalyze(_)}),console.log(e.state.languageNumber)})}},{key:"genreAnalyze",value:function(e){var t=[{genre:"\u5267\u60c5",movieNumber:0}],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var o=l.value,c=!1,u=!0,m=!1,s=void 0;try{for(var y,h=o.genres[Symbol.iterator]();!(u=(y=h.next()).done);u=!0){for(var v=y.value,f=0,g=t;f<g.length;f++){var d=g[f];d.genre===v&&(d.movieNumber++,c=!0)}c||t.push({genre:v,movieNumber:1})}}catch(b){m=!0,s=b}finally{try{u||null==h.return||h.return()}finally{if(m)throw s}}}}catch(b){r=!0,n=b}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return t}},{key:"countryAnalyze",value:function(e){var t=[{country:"\u7f8e\u56fd",movieNumber:0}],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var o=l.value,c=!1,u=!0,m=!1,s=void 0;try{for(var y,h=o.countries[Symbol.iterator]();!(u=(y=h.next()).done);u=!0){for(var v=y.value,f=0,g=t;f<g.length;f++){var d=g[f];d.country===v&&(d.movieNumber++,c=!0)}c||t.push({country:v,movieNumber:1})}}catch(b){m=!0,s=b}finally{try{u||null==h.return||h.return()}finally{if(m)throw s}}}}catch(b){r=!0,n=b}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return t}},{key:"languageAnalyze",value:function(e){var t=[{language:"\u82f1\u8bed",movieNumber:0}],a=!0,r=!1,n=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var o=l.value,c=!1,u=!0,m=!1,s=void 0;try{for(var y,h=o.languages[Symbol.iterator]();!(u=(y=h.next()).done);u=!0){for(var v=y.value,f=0,g=t;f<g.length;f++){var d=g[f];d.language===v&&(d.movieNumber++,c=!0)}c||t.push({language:v,movieNumber:1})}}catch(b){m=!0,s=b}finally{try{u||null==h.return||h.return()}finally{if(m)throw s}}}}catch(b){r=!0,n=b}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}return t}},{key:"searchGenre",value:function(e){for(var t=[],a=0,r=_;a<r.length;a++){var n=r[a],l=!0,i=!1,o=void 0;try{for(var c,u=n.genres[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){-1!==c.value.indexOf(e)&&t.push(n)}}catch(m){i=!0,o=m}finally{try{l||null==u.return||u.return()}finally{if(i)throw o}}}this.setState({data:t})}},{key:"render",value:function(){return n.a.createElement(s.a,{className:"layout"},n.a.createElement(j,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(h.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{lineHeight:"64px"}},n.a.createElement(h.b.Item,{key:"1"},n.a.createElement("a",{href:"/"}," ",n.a.createElement(v.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),n.a.createElement(h.b.Item,{key:"2"},n.a.createElement("a",{href:"/charts"}," ",n.a.createElement(v.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")))),n.a.createElement(A,{style:{padding:"0 50px"}},n.a.createElement(f.a,{style:{margin:"16px 0"}},n.a.createElement(f.a.Item,null,"charts")),n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},n.a.createElement(I.Chart,{height:400,data:this.state.genresNumber,scale:{movieNumber:{tickInterval:20}},forceFit:!0},n.a.createElement(I.Axis,{name:"genre"}),n.a.createElement(I.Axis,{name:"movieNumber"}),n.a.createElement(I.Tooltip,{crosshairs:{type:"y"}}),n.a.createElement(I.Geom,{type:"interval",position:"genre*movieNumber",color:"genre"})),n.a.createElement(I.Chart,{height:400,data:this.state.countryNumber,scale:{movieNumber:{tickInterval:10}},forceFit:!0},n.a.createElement(I.Axis,{name:"country"}),n.a.createElement(I.Axis,{name:"movieNumber"}),n.a.createElement(I.Tooltip,{crosshairs:{type:"y"}}),n.a.createElement(I.Geom,{type:"interval",position:"country*movieNumber",color:"country"})),n.a.createElement(I.Chart,{height:400,data:this.state.languageNumber,scale:{movieNumber:{tickInterval:10}},forceFit:!0},n.a.createElement(I.Axis,{name:"language"}),n.a.createElement(I.Axis,{name:"movieNumber"}),n.a.createElement(I.Tooltip,{crosshairs:{type:"y"}}),n.a.createElement(I.Geom,{type:"interval",position:"language*movieNumber",color:"language"})))),n.a.createElement(C,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab02 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(r.Component)),H=m.a.Search,F=[],M=s.a.Header,G=s.a.Content,J=s.a.Footer,T=y.a.Option,W="title",B=h.b.SubMenu,D=function(e){var t=e.type,a=e.text;return n.a.createElement("span",null,n.a.createElement(v.a,{type:t,style:{marginRight:8}}),a)},K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={data:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var e=this;fetch("./films.json").then(function(e){return e.text()}).then(function(t){var a=t.split("\n"),r=!0,n=!1,l=void 0;try{for(var i,o=a[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value,u=JSON.parse(c);F.push(u)}}catch(m){n=!0,l=m}finally{try{r||null==o.return||o.return()}finally{if(n)throw l}}e.setState({data:F})}),console.log(F)}},{key:"searchTitle",value:function(e){for(var t=[],a=0,r=F;a<r.length;a++){var n=r[a];-1!==n.title.indexOf(e)&&t.push(n)}this.setState({data:t})}},{key:"searchGenre",value:function(e){for(var t=[],a=0,r=F;a<r.length;a++){var n=r[a],l=!0,i=!1,o=void 0;try{for(var c,u=n.genres[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){-1!==c.value.indexOf(e)&&t.push(n)}}catch(m){i=!0,o=m}finally{try{l||null==u.return||u.return()}finally{if(i)throw o}}}this.setState({data:t})}},{key:"searchAll",value:function(e){for(var t=[],a=0,r=F;a<r.length;a++){var n=r[a];-1!==JSON.stringify(n).indexOf(e)&&t.push(n)}this.setState({data:t})}},{key:"render",value:function(){var e=this,t=n.a.createElement(y.a,{defaultValue:"\u6309\u6807\u9898",style:{width:90},onChange:function(e){W=e}},n.a.createElement(T,{value:"title"},"\u6309\u6807\u9898"),n.a.createElement(T,{value:"genre"},"\u6309\u7c7b\u522b"),n.a.createElement(T,{value:"all"},"\u5168\u6587\u641c\u7d22"));return n.a.createElement(s.a,{className:"layout"},n.a.createElement(M,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(h.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},n.a.createElement(h.b.Item,{key:"1"},n.a.createElement("a",{href:"/web_lab2_movie-list"}," ",n.a.createElement(v.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),n.a.createElement(h.b.Item,{key:"2"},n.a.createElement("a",{href:"/web_lab2_movie-list/#/charts"}," ",n.a.createElement(v.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")),n.a.createElement(B,{key:"sub1",title:n.a.createElement("span",null,n.a.createElement(v.a,{type:"plus-square"}),n.a.createElement("span",null,"\u6309\u7c7b\u522b\u6d4f\u89c8")),onClick:function(t){console.log(t.key),e.searchGenre(t.key)}},n.a.createElement(h.b.Item,{key:"\u5267\u60c5"},"\u5267\u60c5"),n.a.createElement(h.b.Item,{key:"\u559c\u5267"},"\u559c\u5267"),n.a.createElement(h.b.Item,{key:"\u52a8\u4f5c"},"\u52a8\u4f5c"),n.a.createElement(h.b.Item,{key:"\u79d1\u5e7b"},"\u79d1\u5e7b"),n.a.createElement(h.b.Item,{key:"\u52a8\u753b"},"\u52a8\u753b"),n.a.createElement(h.b.Item,{key:"\u60ca\u609a"},"\u60ca\u609a"),n.a.createElement(h.b.Item,{key:"\u7231\u60c5"},"\u7231\u60c5"),n.a.createElement(h.b.Item,{key:"\u72af\u7f6a"},"\u72af\u7f6a"),n.a.createElement(h.b.Item,{key:"\u5192\u9669"},"\u5192\u9669")))),n.a.createElement(G,{style:{padding:"0 50px"}},n.a.createElement(f.a,{style:{margin:"16px 0"}},n.a.createElement(f.a.Item,null,"Home")),n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},n.a.createElement("h1",null,"Movie list"),n.a.createElement(H,{addonBefore:t,placeholder:"input search text",enterButton:"Search",size:"large",onSearch:function(t){"title"===W?e.searchTitle(t):"genre"===W?e.searchGenre(t):"all"===W&&e.searchAll(t)}}),n.a.createElement(g.a,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:10},dataSource:this.state.data,footer:n.a.createElement("div",null," ",n.a.createElement("b",null,"movie")," list"),renderItem:function(e){return n.a.createElement(g.a.Item,{key:e.title,actions:[n.a.createElement(d.a,{disabled:!0,defaultValue:parseFloat(e.rating.average)/2,allowHalf:!0,tooltips:[e.rating.average,e.rating.average,e.rating.average,e.rating.average,e.rating.average]}),n.a.createElement(D,{type:"edit",text:e.rating.average+"\u5206"}),n.a.createElement(D,{type:"user",text:e.rating.rating_people})],extra:n.a.createElement("img",{width:100,alt:"logo",src:e.poster})},n.a.createElement(g.a.Item.Meta,{title:n.a.createElement("a",{href:"/web_lab2_movie-list/#/detail/".concat(e._id)},"  ",e.title),description:e.pubdate+"("+e.genres+")"}))}}))),n.a.createElement(J,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab02 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(r.Component),V=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(b.a,null,n.a.createElement(p.a,{exact:!0,path:"/",component:K}),n.a.createElement(p.a,{path:"/detail/:id",component:O}),n.a.createElement(p.a,{path:"/charts",component:z}))}}]),t}(r.Component),q=a(8);a.n(q).a.render(n.a.createElement(V,null),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.07597a47.chunk.js.map