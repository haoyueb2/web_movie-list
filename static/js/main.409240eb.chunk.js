(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(203)},126:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),o=a(36),i=a(40),c=a(37),u=a(41),s=(a(125),a(208)),m=a(204),h=a(62),f=a(211),y=a(11),g=a(212),v=a(209),d=a(210),p=(a(126),a(120)),b=a(38),E=a(207),k=m.a.Header,x=m.a.Content,N=m.a.Footer,S=[],w={},j=(f.b.SubMenu,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={data:{},directors:"",casts:"",writers:"",rating:{average:1,rating_people:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleJson",value:function(){for(var e=0,t=S;e<t.length;e++){var a=t[e];for(var n in console.log(a),a){try{a[n]=JSON.parse(a[n])}catch(r){console.log("\u51fa\u9519"+n+r)}console.log(a[n])}}}},{key:"componentDidMount",value:function(){var e=this;fetch("https://www.mooooon333.cn:5000/api/id/"+this.props.match.params.id).then(function(e){return e.json()}).then(function(t){console.log(t),S=t,console.log(S),e.handleJson(),e.setState({data:S});var a=!0,n=!1,r=void 0;try{for(var l,o=S[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value;if(i._id===e.props.match.params.id){w=i,console.log(w);var c="",u=!0,s=!1,m=void 0;try{for(var h,f=w.directors[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){c+=h.value.name}}catch(O){s=!0,m=O}finally{try{u||null==f.return||f.return()}finally{if(s)throw m}}var y="",g=!0,v=!1,d=void 0;try{for(var p,b=w.casts[Symbol.iterator]();!(g=(p=b.next()).done);g=!0){y=y+p.value.name+"/"}}catch(O){v=!0,d=O}finally{try{g||null==b.return||b.return()}finally{if(v)throw d}}var E="",k=!0,x=!1,N=void 0;try{for(var j,C=w.writers[Symbol.iterator]();!(k=(j=C.next()).done);k=!0){E=E+j.value.name+"/"}}catch(O){x=!0,N=O}finally{try{k||null==C.return||C.return()}finally{if(x)throw N}}var I={average:5,rating_people:""};I.average=parseFloat(w.rating.average),I.rating_people=w.rating.rating_people,e.setState({data:w,directors:c,casts:y,writers:E,rating:I})}}}catch(O){n=!0,r=O}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}})}},{key:"render",value:function(){return r.a.createElement(m.a,{className:"layout"},r.a.createElement(k,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(f.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(f.b.Item,{key:"1"},r.a.createElement("a",{href:"./"}," ",r.a.createElement(y.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),r.a.createElement(f.b.Item,{key:"2"},r.a.createElement("a",{href:"./#/charts"}," ",r.a.createElement(y.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")))),r.a.createElement(x,{style:{padding:"0 50px"}},r.a.createElement(g.a,{style:{margin:"16px 0"}},r.a.createElement(g.a.Item,null,"details")),r.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280,Align:"center"}},r.a.createElement("h1",null,this.state.data.title),r.a.createElement(E.a,{style:{width:300},cover:r.a.createElement("img",{alt:"example",src:this.state.data.poster})}),r.a.createElement("h2",null,"\u5bfc\u6f14\uff1a",this.state.directors),r.a.createElement("h2",null,"\u4e3b\u6f14\uff1a",this.state.casts),r.a.createElement("h3",null,"\u8bc4\u5206\uff1a",this.state.rating.average,"(\u8bc4\u5206\u4eba\u6570",this.state.rating.rating_people,"\u4eba)"),r.a.createElement(d.a,{disabled:!0,value:this.state.rating.average/2,allowHalf:!0}),r.a.createElement("h3",null,"\u4e0a\u6620\u65e5\u671f\uff1a",this.state.data.pubdata),r.a.createElement("h3",null,"\u65f6\u957f\uff1a",this.state.data.duration,"\u5206\u949f"),r.a.createElement("h4",null,"\u539f\u8457\uff1a",this.state.writers),r.a.createElement("h4",null,"\u8bed\u8a00\uff1a",this.state.data.languages),r.a.createElement("p",null,"\u5267\u60c5\u6897\u6982\uff1a",this.state.data.summary))),r.a.createElement(N,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab03 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(n.Component)),C=a(19),I=m.a.Header,O=m.a.Content,A=m.a.Footer,J=[],z=(f.b.SubMenu,"https://www.mooooon333.cn:5000"),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={data:[],genresNumber:[],countryNumber:[],languageNumber:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleJson",value:function(){for(var e=0,t=J;e<t.length;e++){var a=t[e];for(var n in a)try{a[n]=JSON.parse(a[n])}catch(r){}}}},{key:"componentWillMount",value:function(){var e=this;fetch(z+"/api/genre/all").then(function(e){return e.json()}).then(function(t){J=t,e.handleJson(),e.setState({data:J,genresNumber:e.genreAnalyze(J)})}),fetch(z+"/api/country/all").then(function(e){return e.json()}).then(function(t){console.log(t),J=t,e.handleJson(),e.setState({data:J,countryNumber:e.countryAnalyze(J)})}),fetch(z+"/api/language/all").then(function(e){return e.json()}).then(function(t){console.log(t),J=t,e.handleJson(),e.setState({data:J,languageNumber:e.languageAnalyze(J)})})}},{key:"genreAnalyze",value:function(e){var t=[{genre:"\u5267\u60c5",movieNumber:0}],a=!0,n=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value,c=!1,u=!0,s=!1,m=void 0;try{for(var h,f=i.genres[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){for(var y=h.value,g=0,v=t;g<v.length;g++){var d=v[g];d.genre===y&&(d.movieNumber++,c=!0)}c||t.push({genre:y,movieNumber:1})}}catch(p){s=!0,m=p}finally{try{u||null==f.return||f.return()}finally{if(s)throw m}}}}catch(p){n=!0,r=p}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"countryAnalyze",value:function(e){var t=[{country:"\u7f8e\u56fd",movieNumber:0}],a=!0,n=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value,c=!1,u=!0,s=!1,m=void 0;try{for(var h,f=i.countries[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){for(var y=h.value,g=0,v=t;g<v.length;g++){var d=v[g];d.country===y&&(d.movieNumber++,c=!0)}c||t.push({country:y,movieNumber:1})}}catch(p){s=!0,m=p}finally{try{u||null==f.return||f.return()}finally{if(s)throw m}}}}catch(p){n=!0,r=p}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"languageAnalyze",value:function(e){var t=[{language:"\u82f1\u8bed",movieNumber:0}],a=!0,n=!1,r=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value,c=!1,u=!0,s=!1,m=void 0;try{for(var h,f=i.languages[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){for(var y=h.value,g=0,v=t;g<v.length;g++){var d=v[g];d.language===y&&(d.movieNumber++,c=!0)}c||t.push({language:y,movieNumber:1})}}catch(p){s=!0,m=p}finally{try{u||null==f.return||f.return()}finally{if(s)throw m}}}}catch(p){n=!0,r=p}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"render",value:function(){var e={rotate:70,textStyle:{textAlign:"center",fill:"#404040",fontSize:"10",fontWeight:"bold",textBaseline:"top"}};return r.a.createElement(m.a,{className:"layout"},r.a.createElement(I,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(f.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{lineHeight:"64px"}},r.a.createElement(f.b.Item,{key:"1"},r.a.createElement("a",{href:"./"}," ",r.a.createElement(y.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),r.a.createElement(f.b.Item,{key:"2"},r.a.createElement("a",{href:"./#/charts"}," ",r.a.createElement(y.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")))),r.a.createElement(O,{style:{padding:"0 50px"}},r.a.createElement(g.a,{style:{margin:"16px 0"}},r.a.createElement(g.a.Item,null,"charts")),r.a.createElement("h3",null,"\u52a0\u8f7d\u65f6\u95f4\u8f83\u957f\u8bf7\u8010\u5fc3\u7b49\u5f85,\u9f20\u6807\u79fb\u5230\u5bf9\u5e94\u5217\u4e0a\u53ef\u770b\u6e05\u8be6\u7ec6\u540d\u79f0\u548c\u6570\u91cf"),r.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},r.a.createElement(C.Chart,{height:400,data:this.state.genresNumber,scale:{movieNumber:{tickInterval:200}},forceFit:!0},r.a.createElement(C.Axis,{name:"genre"}),r.a.createElement(C.Axis,{name:"movieNumber"}),r.a.createElement(C.Tooltip,{crosshairs:{type:"y"}}),r.a.createElement(C.Geom,{type:"interval",position:"genre*movieNumber",color:"genre"})),r.a.createElement(C.Chart,{height:400,data:this.state.countryNumber,scale:{movieNumber:{tickInterval:200}},forceFit:!0},r.a.createElement(C.Axis,{name:"country",label:e}),r.a.createElement(C.Axis,{name:"movieNumber"}),r.a.createElement(C.Tooltip,{crosshairs:{type:"y"}}),r.a.createElement(C.Geom,{type:"interval",position:"country*movieNumber",color:"country"})),r.a.createElement(C.Chart,{height:400,data:this.state.languageNumber,scale:{movieNumber:{tickInterval:200}},forceFit:!0},r.a.createElement(C.Axis,{name:"language",label:e}),r.a.createElement(C.Axis,{name:"movieNumber"}),r.a.createElement(C.Tooltip,{crosshairs:{type:"y"}}),r.a.createElement(C.Geom,{type:"interval",position:"language*movieNumber",color:"language"})))),r.a.createElement(A,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab03 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(n.Component),H=s.a.Search,G=[],F=m.a.Header,M=m.a.Content,T=m.a.Footer,_=h.a.Option,W="title",B=f.b.SubMenu,K="https://www.mooooon333.cn:5000",V=function(e){var t=e.type,a=e.text;return r.a.createElement("span",null,r.a.createElement(y.a,{type:t,style:{marginRight:8}}),a)},q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={data:[],pageNum:1e4,genre:"",title:"",all:"",listContent:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.fetchData(1)}},{key:"fetchData",value:function(e){var t=this;fetch(K+"/api/films/"+e).then(function(e){return e.json()}).then(function(e){console.log(e),G=e,t.handleJson(),t.setState({data:G})})}},{key:"handleJson",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,r=G[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var l=n.value;for(var o in console.log(l),l)try{l[o]=JSON.parse(l[o])}catch(i){}}}catch(c){t=!0,a=c}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}}},{key:"searchTitle",value:function(e){var t=this;fetch(K+"/api/title/"+e).then(function(e){return e.text()}).then(function(a){console.log(a),t.setState({pageNum:a,title:e})}),this.fetchTitleData(e,1)}},{key:"fetchTitleData",value:function(e,t){var a=this;fetch(K+"/api/title/"+e+"/"+t).then(function(e){return e.json()}).then(function(e){G=e,a.handleJson(),a.setState({data:G})})}},{key:"searchGenre",value:function(e){var t=this;fetch(K+"/api/genre/"+e).then(function(e){return e.text()}).then(function(a){console.log(a),t.setState({pageNum:a,genre:e})}),this.fetchGenreData(e,1)}},{key:"fetchGenreData",value:function(e,t){var a=this;fetch(K+"/api/genre/"+e+"/"+t).then(function(e){return e.json()}).then(function(e){G=e,a.handleJson(),a.setState({data:G}),console.log("\u9875\u8c03\u8bd5\uff1a"+a.state.listContent,a.state.genre)})}},{key:"searchAll",value:function(e){var t=this;fetch(K+"/api/all/"+e).then(function(e){return e.text()}).then(function(a){console.log(a),t.setState({pageNum:a,all:e})}),this.fetchAllData(e,1)}},{key:"fetchAllData",value:function(e,t){var a=this;fetch(K+"/api/all/"+e+"/"+t).then(function(e){return e.json()}).then(function(e){G=e,a.handleJson(),a.setState({data:G}),console.log("\u9875\u8c03\u8bd5\uff1a"+a.state.listContent,a.state.genre)})}},{key:"render",value:function(){var e=this,t=r.a.createElement(h.a,{defaultValue:"\u6309\u6807\u9898",style:{width:90},onChange:function(e){W=e}},r.a.createElement(_,{value:"title"},"\u6309\u6807\u9898"),r.a.createElement(_,{value:"genre"},"\u6309\u7c7b\u522b"),r.a.createElement(_,{value:"all"},"\u5168\u6587\u641c\u7d22"));return r.a.createElement(m.a,{className:"layout"},r.a.createElement(F,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(f.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},r.a.createElement(f.b.Item,{key:"1"},r.a.createElement("a",{href:"./"}," ",r.a.createElement(y.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),r.a.createElement(f.b.Item,{key:"2"},r.a.createElement("a",{href:"./#/charts"}," ",r.a.createElement(y.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")),r.a.createElement(B,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(y.a,{type:"plus-square"}),r.a.createElement("span",null,"\u6309\u7c7b\u522b\u6d4f\u89c8")),onClick:function(t){console.log(t.key),e.setState({listContent:"genre"}),e.searchGenre(t.key)}},r.a.createElement(f.b.Item,{key:"\u5267\u60c5"},"\u5267\u60c5"),r.a.createElement(f.b.Item,{key:"\u559c\u5267"},"\u559c\u5267"),r.a.createElement(f.b.Item,{key:"\u52a8\u4f5c"},"\u52a8\u4f5c"),r.a.createElement(f.b.Item,{key:"\u79d1\u5e7b"},"\u79d1\u5e7b"),r.a.createElement(f.b.Item,{key:"\u52a8\u753b"},"\u52a8\u753b"),r.a.createElement(f.b.Item,{key:"\u60ca\u609a"},"\u60ca\u609a"),r.a.createElement(f.b.Item,{key:"\u7231\u60c5"},"\u7231\u60c5"),r.a.createElement(f.b.Item,{key:"\u72af\u7f6a"},"\u72af\u7f6a"),r.a.createElement(f.b.Item,{key:"\u5192\u9669"},"\u5192\u9669")))),r.a.createElement(M,{style:{padding:"0 50px"}},r.a.createElement(g.a,{style:{margin:"16px 0"}},r.a.createElement(g.a.Item,null,"Home")),r.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},r.a.createElement("h1",null,"Movie list"),r.a.createElement(H,{addonBefore:t,placeholder:"input search text",enterButton:"Search",size:"large",onSearch:function(t){e.setState({listContent:W}),"title"===W?e.searchTitle(t):"genre"===W?e.searchGenre(t):"all"===W&&e.searchAll(t)}}),r.a.createElement(v.a,{itemLayout:"vertical",size:"large",pagination:{onChange:function(t){""===e.state.listContent?e.fetchData(t):"genre"===e.state.listContent?e.fetchGenreData(e.state.genre,t):"title"===e.state.listContent?e.fetchTitleData(e.state.title,t):"all"===e.state.listContent&&e.fetchAllData(e.state.all,t),console.log(t)},pageSize:10,total:this.state.pageNum},dataSource:this.state.data,footer:r.a.createElement("div",null," ",r.a.createElement("b",null,"movie")," list"),renderItem:function(e){return r.a.createElement(v.a.Item,{key:e.title,actions:[r.a.createElement(d.a,{disabled:!0,defaultValue:parseFloat(e.rating.average)/2,allowHalf:!0,tooltips:[e.rating.average,e.rating.average,e.rating.average,e.rating.average,e.rating.average]}),r.a.createElement(V,{type:"edit",text:e.rating.average+"\u5206"}),r.a.createElement(V,{type:"user",text:e.rating.rating_people})],extra:r.a.createElement("img",{width:100,alt:"logo",src:e.poster})},r.a.createElement(v.a.Item.Meta,{title:r.a.createElement("a",{href:"./#/detail/".concat(e._id)},"  ",e.title),description:e.pubdate+"("+e.genres+")"}))}}))),r.a.createElement(T,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab03 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(n.Component),L=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(b.a,{exact:!0,path:"/",component:q}),r.a.createElement(b.a,{path:"/detail/:id",component:j}),r.a.createElement(b.a,{path:"/charts",component:D}))}}]),t}(n.Component),R=a(8);a.n(R).a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.409240eb.chunk.js.map