(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(203)},126:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(35),o=a(36),i=a(40),c=a(37),u=a(41),s=(a(125),a(208)),m=a(204),h=a(62),y=a(211),f=a(11),v=a(212),g=a(209),d=a(210),p=(a(126),a(120)),b=a(38),E=a(207),k=m.a.Header,x=m.a.Content,N=m.a.Footer,S=[],w={},I=(y.b.SubMenu,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={data:{},directors:"",casts:"",writers:"",rating:{average:1,rating_people:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleJson",value:function(){for(var e=0,t=S;e<t.length;e++){var a=t[e];for(var r in console.log(a),a){try{a[r]=JSON.parse(a[r])}catch(n){console.log("\u51fa\u9519"+r+n)}console.log(a[r])}}}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/films/"+this.props.match.params.page).then(function(e){return e.json()}).then(function(t){console.log(t),S=t,console.log(S),e.handleJson(),e.setState({data:S});var a=!0,r=!1,n=void 0;try{for(var l,o=S[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value;if(i._id===e.props.match.params.id){w=i,console.log(w);var c="",u=!0,s=!1,m=void 0;try{for(var h,y=w.directors[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){c+=h.value.name}}catch(A){s=!0,m=A}finally{try{u||null==y.return||y.return()}finally{if(s)throw m}}var f="",v=!0,g=!1,d=void 0;try{for(var p,b=w.casts[Symbol.iterator]();!(v=(p=b.next()).done);v=!0){f=f+p.value.name+"/"}}catch(A){g=!0,d=A}finally{try{v||null==b.return||b.return()}finally{if(g)throw d}}var E="",k=!0,x=!1,N=void 0;try{for(var I,O=w.writers[Symbol.iterator]();!(k=(I=O.next()).done);k=!0){E=E+I.value.name+"/"}}catch(A){x=!0,N=A}finally{try{k||null==O.return||O.return()}finally{if(x)throw N}}var j={average:5,rating_people:""};j.average=parseFloat(w.rating.average),j.rating_people=w.rating.rating_people,e.setState({data:w,directors:c,casts:f,writers:E,rating:j})}}}catch(A){r=!0,n=A}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}})}},{key:"render",value:function(){return n.a.createElement(m.a,{className:"layout"},n.a.createElement(k,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(y.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},n.a.createElement(y.b.Item,{key:"1"},n.a.createElement("a",{href:"./"}," ",n.a.createElement(f.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),n.a.createElement(y.b.Item,{key:"2"},n.a.createElement("a",{href:"./#/charts"}," ",n.a.createElement(f.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")))),n.a.createElement(x,{style:{padding:"0 50px"}},n.a.createElement(v.a,{style:{margin:"16px 0"}},n.a.createElement(v.a.Item,null,"details")),n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280,Align:"center"}},n.a.createElement("h1",null,this.state.data.title),n.a.createElement(E.a,{style:{width:300},cover:n.a.createElement("img",{alt:"example",src:this.state.data.poster})}),n.a.createElement("h2",null,"\u5bfc\u6f14\uff1a",this.state.directors),n.a.createElement("h2",null,"\u4e3b\u6f14\uff1a",this.state.casts),n.a.createElement("h3",null,"\u8bc4\u5206\uff1a",this.state.rating.average,"(\u8bc4\u5206\u4eba\u6570",this.state.rating.rating_people,"\u4eba)"),n.a.createElement(d.a,{disabled:!0,value:this.state.rating.average/2,allowHalf:!0}),n.a.createElement("h3",null,"\u4e0a\u6620\u65e5\u671f\uff1a",this.state.data.pubdata),n.a.createElement("h3",null,"\u65f6\u957f\uff1a",this.state.data.duration,"\u5206\u949f"),n.a.createElement("h4",null,"\u539f\u8457\uff1a",this.state.writers),n.a.createElement("h4",null,"\u8bed\u8a00\uff1a",this.state.data.languages),n.a.createElement("p",null,"\u5267\u60c5\u6897\u6982\uff1a",this.state.data.summary))),n.a.createElement(N,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab02 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(r.Component)),O=a(19),j=m.a.Header,A=m.a.Content,C=m.a.Footer,z=[],H=(y.b.SubMenu,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={data:[],genresNumber:[],countryNumber:[],languageNumber:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;fetch("./films.json").then(function(e){return e.text()}).then(function(t){var a=t.split("\n"),r=!0,n=!1,l=void 0;try{for(var o,i=a[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var c=o.value,u=JSON.parse(c);z.push(u)}}catch(s){n=!0,l=s}finally{try{r||null==i.return||i.return()}finally{if(n)throw l}}e.setState({data:z,genresNumber:e.genreAnalyze(z),countryNumber:e.countryAnalyze(z),languageNumber:e.languageAnalyze(z)}),console.log(e.state.languageNumber)})}},{key:"genreAnalyze",value:function(e){var t=[{genre:"\u5267\u60c5",movieNumber:0}],a=!0,r=!1,n=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value,c=!1,u=!0,s=!1,m=void 0;try{for(var h,y=i.genres[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){for(var f=h.value,v=0,g=t;v<g.length;v++){var d=g[v];d.genre===f&&(d.movieNumber++,c=!0)}c||t.push({genre:f,movieNumber:1})}}catch(p){s=!0,m=p}finally{try{u||null==y.return||y.return()}finally{if(s)throw m}}}}catch(p){r=!0,n=p}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return t}},{key:"countryAnalyze",value:function(e){var t=[{country:"\u7f8e\u56fd",movieNumber:0}],a=!0,r=!1,n=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value,c=!1,u=!0,s=!1,m=void 0;try{for(var h,y=i.countries[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){for(var f=h.value,v=0,g=t;v<g.length;v++){var d=g[v];d.country===f&&(d.movieNumber++,c=!0)}c||t.push({country:f,movieNumber:1})}}catch(p){s=!0,m=p}finally{try{u||null==y.return||y.return()}finally{if(s)throw m}}}}catch(p){r=!0,n=p}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return t}},{key:"languageAnalyze",value:function(e){var t=[{language:"\u82f1\u8bed",movieNumber:0}],a=!0,r=!1,n=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value,c=!1,u=!0,s=!1,m=void 0;try{for(var h,y=i.languages[Symbol.iterator]();!(u=(h=y.next()).done);u=!0){for(var f=h.value,v=0,g=t;v<g.length;v++){var d=g[v];d.language===f&&(d.movieNumber++,c=!0)}c||t.push({language:f,movieNumber:1})}}catch(p){s=!0,m=p}finally{try{u||null==y.return||y.return()}finally{if(s)throw m}}}}catch(p){r=!0,n=p}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return t}},{key:"searchGenre",value:function(e){for(var t=[],a=0,r=z;a<r.length;a++){var n=r[a],l=!0,o=!1,i=void 0;try{for(var c,u=n.genres[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){-1!==c.value.indexOf(e)&&t.push(n)}}catch(s){o=!0,i=s}finally{try{l||null==u.return||u.return()}finally{if(o)throw i}}}this.setState({data:t})}},{key:"render",value:function(){return n.a.createElement(m.a,{className:"layout"},n.a.createElement(j,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(y.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"],style:{lineHeight:"64px"}},n.a.createElement(y.b.Item,{key:"1"},n.a.createElement("a",{href:"./"}," ",n.a.createElement(f.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),n.a.createElement(y.b.Item,{key:"2"},n.a.createElement("a",{href:"./#/charts"}," ",n.a.createElement(f.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")))),n.a.createElement(A,{style:{padding:"0 50px"}},n.a.createElement(v.a,{style:{margin:"16px 0"}},n.a.createElement(v.a.Item,null,"charts")),n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},n.a.createElement(O.Chart,{height:400,data:this.state.genresNumber,scale:{movieNumber:{tickInterval:20}},forceFit:!0},n.a.createElement(O.Axis,{name:"genre"}),n.a.createElement(O.Axis,{name:"movieNumber"}),n.a.createElement(O.Tooltip,{crosshairs:{type:"y"}}),n.a.createElement(O.Geom,{type:"interval",position:"genre*movieNumber",color:"genre"})),n.a.createElement(O.Chart,{height:400,data:this.state.countryNumber,scale:{movieNumber:{tickInterval:10}},forceFit:!0},n.a.createElement(O.Axis,{name:"country"}),n.a.createElement(O.Axis,{name:"movieNumber"}),n.a.createElement(O.Tooltip,{crosshairs:{type:"y"}}),n.a.createElement(O.Geom,{type:"interval",position:"country*movieNumber",color:"country"})),n.a.createElement(O.Chart,{height:400,data:this.state.languageNumber,scale:{movieNumber:{tickInterval:10}},forceFit:!0},n.a.createElement(O.Axis,{name:"language"}),n.a.createElement(O.Axis,{name:"movieNumber"}),n.a.createElement(O.Tooltip,{crosshairs:{type:"y"}}),n.a.createElement(O.Geom,{type:"interval",position:"language*movieNumber",color:"language"})))),n.a.createElement(C,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab02 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(r.Component)),J=s.a.Search,G=[],F=m.a.Header,M=m.a.Content,_=m.a.Footer,D=h.a.Option,T="title",W=y.b.SubMenu,B=function(e){var t=e.type,a=e.text;return n.a.createElement("span",null,n.a.createElement(f.a,{type:t,style:{marginRight:8}}),a)},K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={data:[],pageNum:1e4,pageId:1,genres:"all"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.fetchData(1)}},{key:"fetchData",value:function(e){var t=this;fetch("https://www.mooooon333.cn:5000/api/films/"+e).then(function(e){return e.json()}).then(function(e){console.log(e),G=e,console.log(G),t.handleJson(),t.setState({data:G})})}},{key:"handleJson",value:function(){var e=!0,t=!1,a=void 0;try{for(var r,n=G[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var l=r.value;for(var o in console.log(l),l){try{l[o]=JSON.parse(l[o])}catch(i){console.log("\u51fa\u9519"+o+i)}console.log(l[o])}}}catch(c){t=!0,a=c}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}}},{key:"searchTitle",value:function(e){var t=[],a=!0,r=!1,n=void 0;try{for(var l,o=G[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value;-1!==i.title.indexOf(e)&&t.push(i)}}catch(c){r=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}this.setState({data:t})}},{key:"searchGenre",value:function(e){var t=this;fetch("/api/"+e).then(function(e){return e.text()}).then(function(a){console.log(a),t.setState({pageNum:a,genres:e})}),this.fetchGenresData(e,1)}},{key:"fetchGenresData",value:function(e,t){var a=this;fetch("/api/"+e+"/"+t).then(function(e){return e.json()}).then(function(e){console.log(e),G=e,console.log(G),a.handleJson(),a.setState({data:G})})}},{key:"searchAll",value:function(e){var t=[],a=!0,r=!1,n=void 0;try{for(var l,o=G[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var i=l.value;-1!==JSON.stringify(i).indexOf(e)&&t.push(i)}}catch(c){r=!0,n=c}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}this.setState({data:t})}},{key:"render",value:function(){var e=this,t=n.a.createElement(h.a,{defaultValue:"\u6309\u6807\u9898",style:{width:90},onChange:function(e){T=e}},n.a.createElement(D,{value:"title"},"\u6309\u6807\u9898"),n.a.createElement(D,{value:"genre"},"\u6309\u7c7b\u522b"),n.a.createElement(D,{value:"all"},"\u5168\u6587\u641c\u7d22"));return n.a.createElement(m.a,{className:"layout"},n.a.createElement(F,null,n.a.createElement("div",{className:"logo"}),n.a.createElement(y.b,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["1"],style:{lineHeight:"64px"}},n.a.createElement(y.b.Item,{key:"1"},n.a.createElement("a",{href:"./"}," ",n.a.createElement(f.a,{type:"bars"}),"\u7535\u5f71\u5217\u8868")),n.a.createElement(y.b.Item,{key:"2"},n.a.createElement("a",{href:"./#/charts"}," ",n.a.createElement(f.a,{type:"bar-chart"}),"\u6570\u636e\u53ef\u89c6\u5316")),n.a.createElement(W,{key:"sub1",title:n.a.createElement("span",null,n.a.createElement(f.a,{type:"plus-square"}),n.a.createElement("span",null,"\u6309\u7c7b\u522b\u6d4f\u89c8")),onClick:function(t){console.log(t.key),e.searchGenre(t.key)}},n.a.createElement(y.b.Item,{key:"\u5267\u60c5"},"\u5267\u60c5"),n.a.createElement(y.b.Item,{key:"\u559c\u5267"},"\u559c\u5267"),n.a.createElement(y.b.Item,{key:"\u52a8\u4f5c"},"\u52a8\u4f5c"),n.a.createElement(y.b.Item,{key:"\u79d1\u5e7b"},"\u79d1\u5e7b"),n.a.createElement(y.b.Item,{key:"\u52a8\u753b"},"\u52a8\u753b"),n.a.createElement(y.b.Item,{key:"\u60ca\u609a"},"\u60ca\u609a"),n.a.createElement(y.b.Item,{key:"\u7231\u60c5"},"\u7231\u60c5"),n.a.createElement(y.b.Item,{key:"\u72af\u7f6a"},"\u72af\u7f6a"),n.a.createElement(y.b.Item,{key:"\u5192\u9669"},"\u5192\u9669")))),n.a.createElement(M,{style:{padding:"0 50px"}},n.a.createElement(v.a,{style:{margin:"16px 0"}},n.a.createElement(v.a.Item,null,"Home")),n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},n.a.createElement("h1",null,"Movie list"),n.a.createElement(J,{addonBefore:t,placeholder:"input search text",enterButton:"Search",size:"large",onSearch:function(t){"title"===T?e.searchTitle(t):"genre"===T?e.searchGenre(t):"all"===T&&e.searchAll(t)}}),n.a.createElement(g.a,{itemLayout:"vertical",size:"large",pagination:{onChange:function(t){"all"===e.state.genres?e.fetchData(t):e.fetchGenresData(e.state.genres,t),e.setState({pageId:t}),console.log(t)},pageSize:10,total:this.state.pageNum},dataSource:this.state.data,footer:n.a.createElement("div",null," ",n.a.createElement("b",null,"movie")," list"),renderItem:function(t){return n.a.createElement(g.a.Item,{key:t.title,actions:[n.a.createElement(d.a,{disabled:!0,defaultValue:parseFloat(t.rating.average)/2,allowHalf:!0,tooltips:[t.rating.average,t.rating.average,t.rating.average,t.rating.average,t.rating.average]}),n.a.createElement(B,{type:"edit",text:t.rating.average+"\u5206"}),n.a.createElement(B,{type:"user",text:t.rating.rating_people})],extra:n.a.createElement("img",{width:100,alt:"logo",src:t.poster})},n.a.createElement(g.a.Item.Meta,{title:n.a.createElement("a",{href:"./#/".concat(e.state.pageId,"/").concat(t._id)},"  ",t.title),description:t.pubdate+"("+t.genres+")"}))}}))),n.a.createElement(_,{style:{textAlign:"center"}},"\u540c\u6d4e\u5927\u5b66\u8f6f\u4ef6\u5b66\u9662Web\u8bfelab02 \xa92018 Created by \u767d\u7693\u6708"))}}]),t}(r.Component),V=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return n.a.createElement(p.a,null,n.a.createElement(b.a,{exact:!0,path:"/",component:K}),n.a.createElement(b.a,{path:"/:page/:id",component:I}),n.a.createElement(b.a,{path:"/charts",component:H}))}}]),t}(r.Component),q=a(8);a.n(q).a.render(n.a.createElement(V,null),document.getElementById("root"))}},[[123,1,2]]]);
//# sourceMappingURL=main.44f0878b.chunk.js.map